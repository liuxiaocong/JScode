<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>iframe</title>
  </head>
  <body>
    <h1>this is index</h1>

    <iframe src="http://10.34.97.218:8081/iframePage.html?v=9" id='myframe' name="myframe"></iframe>
    <script type="text/javascript">
      iFrame = document.getElementById('myframe')

      //iframe加载完毕后再发送消息，否则子页面接收不到message
      iFrame.onload = function(){

        //iframe加载完立即发送一条消息
        console.log("postMessage");
        iFrame.contentWindow.postMessage('MessageFromIndex1','*');
      }

      function receiveMessageFromIframePage (event) {
        console.log('receiveMessageFromIframePage', event)
      }

      //监听message事件
      window.addEventListener("message", receiveMessageFromIframePage, false);

    </script>
  </body>
</html>